#!/bin/bash

#
#  ||'\   //\  ['|'] ||\/|   ^    //'. ||  | '||'  |\  | ||''|
#  ||  | ||  |   |   ||  |  //\  ||    ||--|  ||   ||\ | ||-  
#  ||_/   \\/   .|   ||  | //''\  \\_/ ||  | .||.  || \| ||__|
#
# Dotmachine: A script for your dotfiles.
# Authour: JamsNJellies
#

version="0.1"

# Define Functions

# Prints text in screen center
print-center() {
	
	cols=$( tput cols )
	rows=$( tput lines )

	message=$1
	input_length=${#message}

	half_input_length=$(( $input_length / 2 ))
	middle_row=$(( ($rows / 2) - $2 ))
	middle_col=$(( ($cols / 2) - $half_input_length ))
	
	tput cup $middle_row $middle_col

	echo $1
	tput sgr0
	tput cup $( tput lines ) 0
}

center-prompt() {
	
	cols=$( tput cols )
	rows=$( tput lines )

	message="Please select an option: "
	input_length=${#message}

	half_input_length=$(( $input_length / 2 ))
	middle_row=$(( ($rows / 2) - $1 ))
	middle_col=$(( ($cols / 2) - $half_input_length ))
	
	tput cup $middle_row $middle_col

	read -p "Please select an option: " input
	tput sgr0
	tput cup $( tput lines ) 0
}


menu() {

	tput bold; tput setf 5
	print-center "Dotfiles - YADM Wrapper" 5
	print-center "version $version" 3
	print-center "by JamsNJellies" 2
	tput setf 5
	print-center "Menu:               " 0
	print-center "[1] Push Dotfiles" -1
	print-center "[2] Pull Dotfiles" -2
	print-center "[3] Repo Status  " -3
	print-center "[4] Commit       " -4
	print-center "[5] Exit         " -5
	center-prompt -6
	input

}

input() {
	case $input in
		1)
			yadm push
			;;
		2)
			yadm pull
			;;
		3)
			yadm status
			;;
		4)
			yadm commit
			;;
		5)
			clear
			exit
			;;
			
		?)
			clear
			tput cup $rows 0
			echo "Error: Invalid input"
			menu
			;;
	esac
}

clear
menu
